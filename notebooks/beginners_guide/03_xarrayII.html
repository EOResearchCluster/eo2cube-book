
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Advanced Xarray &#8212; eo2cube documentation</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet">
  <link href="../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="prev" title="Xarray-I: Data Structure" href="02_xarrayI_data_structure.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">eo2cube documentation</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../intro.html">
   Welcome to the eo2cube documentation
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../../beginners_guide.html">
   Welcome to the Beginners Guide
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="01_data_lookup_and_loading.html">
     Data Lookup and Loading
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="02_xarrayI_data_structure.html">
     Xarray-I: Data Structure
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Advanced Xarray
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/notebooks/beginners_guide/03_xarrayII.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://eo2cube_documentation/"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://eo2cube_documentation//issues/new?title=Issue%20on%20page%20%2Fnotebooks/beginners_guide/03_xarrayII.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#background">
   Background
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#description">
   Description
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#setting-up">
   Setting up
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#load-packages">
     Load packages
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#datacube-connection-and-load-data">
     Datacube connection and load data
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#advanced-indexing">
   <strong>
    Advanced Indexing
   </strong>
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#temporal-subset">
     1) Temporal Subset
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#i-using-index-number">
       I. Using index number
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#ii-using-datetime64-data">
       II. Using
       <code class="docutils literal notranslate">
        <span class="pre">
         datetime64
        </span>
       </code>
       data
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#iii-using-other-time-dimensions">
       III. Using other time dimensions
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#spatial-subset">
     2) Spatial Subset
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#combining-temporal-and-spatial-subset">
     3) Combining Temporal and Spatial Subset
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#data-manipulation-statistics">
   <strong>
    Data Manipulation &amp; Statistics
   </strong>
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#statistical-operation">
     1) Statistical Operation
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#conditional-operation">
     2) Conditional Operation
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#resampling">
     3) Resampling
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#interpolation">
     4) Interpolation
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#recommended-next-steps">
   Recommended next steps
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#additional-information">
   Additional information
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Advanced Xarray</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#background">
   Background
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#description">
   Description
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#setting-up">
   Setting up
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#load-packages">
     Load packages
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#datacube-connection-and-load-data">
     Datacube connection and load data
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#advanced-indexing">
   <strong>
    Advanced Indexing
   </strong>
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#temporal-subset">
     1) Temporal Subset
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#i-using-index-number">
       I. Using index number
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#ii-using-datetime64-data">
       II. Using
       <code class="docutils literal notranslate">
        <span class="pre">
         datetime64
        </span>
       </code>
       data
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#iii-using-other-time-dimensions">
       III. Using other time dimensions
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#spatial-subset">
     2) Spatial Subset
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#combining-temporal-and-spatial-subset">
     3) Combining Temporal and Spatial Subset
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#data-manipulation-statistics">
   <strong>
    Data Manipulation &amp; Statistics
   </strong>
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#statistical-operation">
     1) Statistical Operation
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#conditional-operation">
     2) Conditional Operation
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#resampling">
     3) Resampling
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#interpolation">
     4) Interpolation
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#recommended-next-steps">
   Recommended next steps
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#additional-information">
   Additional information
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <img align="right" src="../../additional_data/banner_siegel.png" style="width:1000px;"><div class="tex2jax_ignore mathjax_ignore section" id="advanced-xarray">
<h1>Advanced Xarray<a class="headerlink" href="#advanced-xarray" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><a class="reference external" href="https://www.phenocube.org/"><strong>Sign up to the JupyterHub</strong></a> to run this notebook interactively from your browser</p></li>
<li><p><strong>Compatibility:</strong> Notebook currently compatible with the Open Data Cube environments of the University of Wuerzburg</p></li>
<li><p><strong>Products used</strong>: <code class="docutils literal notranslate"><span class="pre">Sentinel-2</span></code></p></li>
<li><p><strong>Prerequisites</strong>:  Users of this notebook should have a basic understanding of:</p>
<ul>
<li><p>How to run a <span class="xref myst">Jupyter notebook</span></p></li>
<li><p>The basic structure of the eo2cube <span class="xref myst">satellite datasets</span></p></li>
<li><p>How to browse through the available <span class="xref myst">products and measurements</span> of the eo2cube datacube</p></li>
<li><p>How to <span class="xref myst">load data from the eo2cube datacube</span></p></li>
</ul>
</li>
</ul>
<div class="section" id="background">
<h2>Background<a class="headerlink" href="#background" title="Permalink to this headline">¶</a></h2>
<p>The Python library <code class="docutils literal notranslate"><span class="pre">xarray</span></code> simplifies working with labelled multi-dimension arrays. The library introduces labels in the forms of dimensions, coordinates and attributes on top of <code class="docutils literal notranslate"><span class="pre">numpy</span></code> arrays. This structure allows easier and more effective handling of remote sensing raster data in a Python environment. Therefore, it is essential to fully understand the structure of an <code class="docutils literal notranslate"><span class="pre">xarray</span></code>. A first introduction into the usage of <code class="docutils literal notranslate"><span class="pre">xarray</span></code> within the eo2cube environment was given in <span class="xref myst">“04_loading_data_and_basic_xarray”</span>. This notebook builds on this gained knowledge and attempts to give a deeper understanding of the <code class="docutils literal notranslate"><span class="pre">xarray</span></code> data structure of raster data. If you are interested in learning more about the structures of the original <code class="docutils literal notranslate"><span class="pre">xarray</span></code>, have a look at this <span class="xref myst"><strong>“introduction to xarray” notebook</strong></span> within the “intro_to_python” directory.
To get more information about the <code class="docutils literal notranslate"><span class="pre">xarray</span></code> package, visit the <a class="reference external" href="http://xarray.pydata.org/en/stable/">offical documentation website</a>.</p>
</div>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This notebook introduces users to the <code class="docutils literal notranslate"><span class="pre">xarray</span></code> library within the datacube environment. It aims to deepen the understanding of the <code class="docutils literal notranslate"><span class="pre">xarray</span></code> structure as a container for remote sensing raster data. Also it introduces useful <code class="docutils literal notranslate"><span class="pre">xarray</span></code> functions to effectivly work with raster data in the eo2cube environment. Within this notebook the following topics are covered:</p>
<ul class="simple">
<li><p>Application of built-in <code class="docutils literal notranslate"><span class="pre">xarray</span></code> functions for analyzing raster data</p></li>
</ul>
</div>
<hr class="docutils" />
<div class="section" id="setting-up">
<h2>Setting up<a class="headerlink" href="#setting-up" title="Permalink to this headline">¶</a></h2>
<div class="section" id="load-packages">
<h3>Load packages<a class="headerlink" href="#load-packages" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">datacube</span></code> package is required to query the eo2cube datacube database and load the requested data. The <code class="docutils literal notranslate"><span class="pre">with_ui_cbk</span></code> function from <code class="docutils literal notranslate"><span class="pre">odc.ui</span></code> enables a progress bar when loading large amounts of data. The <code class="docutils literal notranslate"><span class="pre">xarray</span></code> and <code class="docutils literal notranslate"><span class="pre">numpy</span></code> package are needed for the different methods and analysis steps within this notebook.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">datacube</span>
<span class="kn">from</span> <span class="nn">odc.ui</span> <span class="kn">import</span> <span class="n">with_ui_cbk</span>
<span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">dc</span> <span class="o">=</span> <span class="n">datacube</span><span class="o">.</span><span class="n">Datacube</span><span class="p">(</span><span class="n">app</span> <span class="o">=</span> <span class="s2">&quot;nb_understand_ndArrays&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ModuleNotFoundError</span><span class="g g-Whitespace">                       </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="mi">12</span><span class="n">ce9fd6c18b</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="kn">import</span> <span class="nn">datacube</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="kn">from</span> <span class="nn">odc.ui</span> <span class="kn">import</span> <span class="n">with_ui_cbk</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="ne">ModuleNotFoundError</span>: No module named &#39;odc&#39;
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="datacube-connection-and-load-data">
<h3>Datacube connection and load data<a class="headerlink" href="#datacube-connection-and-load-data" title="Permalink to this headline">¶</a></h3>
<p>First we connect to the datacube and load an example dataset from the eo2cube.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load Data Product</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">dc</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">product</span><span class="o">=</span> <span class="s2">&quot;s2_l2a&quot;</span><span class="p">,</span>
            <span class="n">x</span><span class="o">=</span> <span class="p">[</span><span class="mf">12.94</span> <span class="p">,</span><span class="mf">13.05</span><span class="p">],</span>
             <span class="n">y</span><span class="o">=</span> <span class="p">[</span><span class="mf">53.88</span><span class="p">,</span><span class="mf">53.94</span><span class="p">],</span>
             <span class="n">output_crs</span> <span class="o">=</span> <span class="s2">&quot;EPSG:32632&quot;</span><span class="p">,</span>
             <span class="n">time</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;2020-10-01&quot;</span><span class="p">,</span> <span class="s2">&quot;2020-12-31&quot;</span><span class="p">),</span>
             <span class="n">measurements</span><span class="o">=</span> <span class="p">[</span><span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="s2">&quot;green&quot;</span><span class="p">,</span> <span class="s2">&quot;red&quot;</span><span class="p">,</span><span class="s2">&quot;nir&quot;</span><span class="p">],</span>
             <span class="n">resolution</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span>
             <span class="n">group_by</span> <span class="o">=</span> <span class="s2">&quot;solar_day&quot;</span><span class="p">,</span>
             <span class="n">progress_cbk</span><span class="o">=</span><span class="n">with_ui_cbk</span><span class="p">())</span>

<span class="n">ds</span>
</pre></div>
</div>
</div>
</div>
<p><a id='index_array3'></a></p>
</div>
</div>
<div class="section" id="advanced-indexing">
<h2><strong>Advanced Indexing</strong><a class="headerlink" href="#advanced-indexing" title="Permalink to this headline">¶</a></h2>
<div class="section" id="temporal-subset">
<h3>1) Temporal Subset<a class="headerlink" href="#temporal-subset" title="Permalink to this headline">¶</a></h3>
<p>In the earlier tutorial we introduced <code class="docutils literal notranslate"><span class="pre">isel()</span></code>and <code class="docutils literal notranslate"><span class="pre">sel()</span></code> for indexing data. For both methods a <strong>slicing</strong> operator exists. If the function <code class="docutils literal notranslate"><span class="pre">slice()</span></code> is passed onto the index function, the dataset can be sliced.
The first example uses the slicing by position method to select the first five scenes in <code class="docutils literal notranslate"><span class="pre">data_1</span></code>. The start value is included and the stop value is excluded.</p>
<div class="section" id="i-using-index-number">
<h4>I. Using index number<a class="headerlink" href="#i-using-index-number" title="Permalink to this headline">¶</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#slice(0,5)</span>
<span class="c1">#ds.isel(time=slice(0,5)).time</span>
<span class="c1">#ds.isel(time = [0,1,2,3,4]).time</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="nb">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<p>This example uses the slicing by label method to select the scenes between “2020-01-02” and “2020-01-12”. Note, that when using the <code class="docutils literal notranslate"><span class="pre">slice()</span></code> function with the <code class="docutils literal notranslate"><span class="pre">sel()</span></code> method, both start and stop value are included.</p>
</div>
<div class="section" id="ii-using-datetime64-data">
<h4>II. Using <code class="docutils literal notranslate"><span class="pre">datetime64</span></code> data<a class="headerlink" href="#ii-using-datetime64-data" title="Permalink to this headline">¶</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="nb">slice</span><span class="p">(</span><span class="s2">&quot;2020-12-01&quot;</span><span class="p">,</span><span class="s2">&quot;2020-12-25&quot;</span><span class="p">)))</span> 

<span class="c1">#ds.sel(time=slice(&quot;2020-01-01&quot;, &quot;2020-02-31&quot;)) # error</span>
<span class="c1">#ds.sel(time=slice(&quot;2018-01-01&quot;, &quot;2018-01-31&quot;)) # wrong time frame</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#ds.sel(time=slice(&quot;2020-01-01&quot;, &quot;2020-01-31&quot;)).time</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="iii-using-other-time-dimensions">
<h4>III. Using other time dimensions<a class="headerlink" href="#iii-using-other-time-dimensions" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">xarray</span></code> also includes some useful features for the inspection of the time dimension. It allows to easily extract additional information from a dataset. The following code automatically groups the time dimension in seasons (“DJF”, “MAM”, JJA”, “SON”). Since <code class="docutils literal notranslate"><span class="pre">ds</span></code> only contains scens from winter months, only the label “DJF” will appear. There are a lot of other <code class="docutils literal notranslate"><span class="pre">time</span></code> dimensions arguments, e.g. <code class="docutils literal notranslate"><span class="pre">month</span></code>, <code class="docutils literal notranslate"><span class="pre">week</span></code>, <code class="docutils literal notranslate"><span class="pre">weekday</span></code>, <code class="docutils literal notranslate"><span class="pre">dayofyear</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#ds.time</span>
<span class="c1">#using special .dt accessor</span>
<span class="c1">#ds.time.dt</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">season</span>
</pre></div>
</div>
</div>
</div>
<p>It is also possible to extract the “day of year” for a time step.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">dayofyear</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;time.season&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="spatial-subset">
<h3>2) Spatial Subset<a class="headerlink" href="#spatial-subset" title="Permalink to this headline">¶</a></h3>
<p>It is possible to index and <strong>slice within the x and y dimensions</strong>. The following example selects the value for each band of the pixel in the second colum of the raster and the fifth row of the raster (<code class="docutils literal notranslate"><span class="pre">x=2,y=5</span></code>)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="c1">#ds.isel(x=[0,1,2], y=5)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="combining-temporal-and-spatial-subset">
<h3>3) Combining Temporal and Spatial Subset<a class="headerlink" href="#combining-temporal-and-spatial-subset" title="Permalink to this headline">¶</a></h3>
<p>Again, this method can be combined with the <code class="docutils literal notranslate"><span class="pre">slice()</span></code> operator to do a spatial subset of the dataset based on the position of the pixels. If you know the actual coordinate (x,y) value (extent) of the spatial subset area, use the <code class="docutils literal notranslate"><span class="pre">sel()</span></code> function.
Additionally, this subset can also be sliced in the time dimensions.</p>
<p>The following example subsets the <code class="docutils literal notranslate"><span class="pre">ds</span></code> by the spatial location of the pixels. Only the pixels from the first to the fifth column and the pixels from the first to the fifth row are included in the output. Also the scenes where filtered in the time dimension between the first and fifth time step.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds2</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="nb">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span> <span class="n">x</span><span class="o">=</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span> <span class="n">y</span><span class="o">=</span><span class="nb">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">ds2</span>

<span class="c1">#ds2.time</span>
<span class="c1">#plt.scatter(ds2.x.values, ds2.y.values)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="data-manipulation-statistics">
<h2><strong>Data Manipulation &amp; Statistics</strong><a class="headerlink" href="#data-manipulation-statistics" title="Permalink to this headline">¶</a></h2>
<p>This notebook presents some basic built-in functions of the <code class="docutils literal notranslate"><span class="pre">xarray</span></code> library to manipulate and transform data in a <code class="docutils literal notranslate"><span class="pre">xarray.Dataset</span></code>. In this notebook only a fraction of the available <code class="docutils literal notranslate"><span class="pre">xarray</span></code> functions are presented. For a complete overview of all the available functions and tools of the <code class="docutils literal notranslate"><span class="pre">xarray</span></code> package please visit the <a class="reference external" href="http://xarray.pydata.org/en/stable/">documentation website</a>. The <span class="xref myst">notebook 07</span> will cover this topic with a focus on an application oriented remote sensing approach.</p>
<div class="section" id="statistical-operation">
<h3>1) Statistical Operation<a class="headerlink" href="#statistical-operation" title="Permalink to this headline">¶</a></h3>
<p>The simple built-in functions allow the user to do simple calculations with a <code class="docutils literal notranslate"><span class="pre">xarray.Dataset</span></code>.
The <strong>basic math</strong> built-in <code class="docutils literal notranslate"><span class="pre">xarray</span></code> functions are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">min()</span></code>, <code class="docutils literal notranslate"><span class="pre">max()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mean()</span></code>, <code class="docutils literal notranslate"><span class="pre">median()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sum()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">std()</span></code></p></li>
</ul>
<p>The following code demonstrates the easy use of the <code class="docutils literal notranslate"><span class="pre">max()</span></code> function to extract the maximum value of the red band in the <code class="docutils literal notranslate"><span class="pre">ds</span></code> dataset.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">red</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>
<p>To apply a function to every value of a specified dimension (e.g. to calculate the mean of every time step) the <code class="docutils literal notranslate"><span class="pre">dim</span></code> argument in the basic math function must be define with the dimension label.</p>
<p>This examples calculates the mean of the <code class="docutils literal notranslate"><span class="pre">red</span></code> band for each pixel (defined by the unique <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code> combination) over every time step. The result is a data array which can be used for further time series visualization and analysis.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">red</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">]))</span>

<span class="c1">#ds.red.mean(dim=[&quot;x&quot;, &quot;y&quot;]).values</span>
<span class="c1">#plt.plot(ds.red.mean(dim=[&quot;x&quot;, &quot;y&quot;]).values)</span>
</pre></div>
</div>
</div>
</div>
<p>This examples works the other way around. It calculates the standard deviation of every pixel (<code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code>) over all timesteps of the dataset <code class="docutils literal notranslate"><span class="pre">ds</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">red</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="s2">&quot;time&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<p>Remember, to access the raw <code class="docutils literal notranslate"><span class="pre">numpy</span></code> array that stores the values of the resulting <code class="docutils literal notranslate"><span class="pre">xarray.DataArrays</span></code>, the suffix <code class="docutils literal notranslate"><span class="pre">.values</span></code> is needed. This allows you to work with the “actual” data values.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">blue</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span><span class="s2">&quot;y&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
<span class="c1">#plt.plot(ds.blue.sum(dim=[&quot;x&quot;,&quot;y&quot;]).values)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="conditional-operation">
<h3>2) Conditional Operation<a class="headerlink" href="#conditional-operation" title="Permalink to this headline">¶</a></h3>
<p>Using conditional operation can be very helpful when we need to analyse satellite scenes or pixels lies within our interests. The <code class="docutils literal notranslate"><span class="pre">where()</span></code> function provides the option to <strong>mask</strong> a <code class="docutils literal notranslate"><span class="pre">xarray.Dataset</span></code> based on a logical condition. By default, the function converts all values that match the condition to NaN values. This is extremly useful when applied in combination with a binary mask to mask your data to the desired values. The argument <code class="docutils literal notranslate"><span class="pre">other</span></code> let´s you define a subset value for all values that match the condition (default is <code class="docutils literal notranslate"><span class="pre">nan</span></code>). The argument <code class="docutils literal notranslate"><span class="pre">drop</span></code> drops all values which do not match with the condition.
The following example masks the datatset <code class="docutils literal notranslate"><span class="pre">ds</span></code> to only the values which have a reflectance value of greater than 700 in the <code class="docutils literal notranslate"><span class="pre">red</span></code> band.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">red</span> <span class="o">&gt;</span> <span class="mi">700</span><span class="p">))</span>
<span class="c1">#print(ds.where(ds.red &lt; 700))</span>
</pre></div>
</div>
</div>
</div>
<p>This code subsets all zeros in the red band of the dataset <code class="docutils literal notranslate"><span class="pre">ds</span></code> in the first time stamp with the new value -9999.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">replace</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">red</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">red</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">other</span> <span class="o">=</span> <span class="o">-</span><span class="mi">9999</span><span class="p">)</span>
<span class="c1">#replace.values.min()</span>
</pre></div>
</div>
</div>
</div>
<p>The implemented <code class="docutils literal notranslate"><span class="pre">xarray</span></code> function <code class="docutils literal notranslate"><span class="pre">isin()</span></code> allows to <strong>test each value</strong> of <code class="docutils literal notranslate"><span class="pre">xarray.Dataset</span></code> or <code class="docutils literal notranslate"><span class="pre">xarray.DataArray</span></code> whether it is in the elements defined within the function. It returns a boolean array which can be used as a mask.
This example checks all the values of the <code class="docutils literal notranslate"><span class="pre">red</span></code> measurement if the value is in an array from 0 to 550.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mask_red</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">red</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">550</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mask_red</span><span class="p">)</span>

<span class="c1">#plt.imshow(mask_red) #error</span>
<span class="c1">#plt.imshow(mask_red.isel(time=3))</span>
</pre></div>
</div>
</div>
</div>
<p>The created mask can easily be combined with the <code class="docutils literal notranslate"><span class="pre">where()</span></code> function to filter the dataset based on the predefined mask. In this case the <code class="docutils literal notranslate"><span class="pre">ds</span></code> dataset is masked with previously defined mask <code class="docutils literal notranslate"><span class="pre">mask_red</span></code>, which was based on a logical test if values of the <code class="docutils literal notranslate"><span class="pre">red</span></code> band are within a certain range of values.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">mask_red</span><span class="p">))</span> <span class="c1">#masking</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="resampling">
<h3>3) Resampling<a class="headerlink" href="#resampling" title="Permalink to this headline">¶</a></h3>
<p>Working with time series data, resampling is necessary if we want the data product aligns with the temporal window are interested in.</p>
<ul class="simple">
<li><p><strong>resample()</strong></p></li>
</ul>
<p>The <strong><code class="docutils literal notranslate"><span class="pre">resample()</span></code> method</strong> allows to summarise the <code class="docutils literal notranslate"><span class="pre">xarray.Dataset</span></code> to bigger or smaller chunks based on a dimension. It handels both upsampling and downsampling. The argument <code class="docutils literal notranslate"><span class="pre">time</span></code> needs to be defined like a datetime-like coordinate. In the following example we resample the <code class="docutils literal notranslate"><span class="pre">ds</span></code> dataset to a monthly time intervall (<code class="docutils literal notranslate"><span class="pre">time</span> <span class="pre">=</span> <span class="pre">&quot;m&quot;</span></code>) and than calculate the median value for every resample chunk. <em>(this process takes a little while to run)</em></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="s1">&#39;m&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">median</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p><strong>groupby() method</strong></p></li>
</ul>
<p>The <strong><code class="docutils literal notranslate"><span class="pre">groupby()</span></code> method</strong> can also be used within the <code class="docutils literal notranslate"><span class="pre">xarray</span></code> library to <em>aggregate data over time</em>. Time aggregation arguments can be e.g. “time.year”, “time.season”, “time.month”, “time.week”, “time.day”.
The code below groups the <code class="docutils literal notranslate"><span class="pre">ds</span></code> dataset into two groups by year. Therefore, a new “dimension” <code class="docutils literal notranslate"><span class="pre">year</span></code> is created. Then the median for each <code class="docutils literal notranslate"><span class="pre">year</span></code> is calculated. <em>(this process takes a little while to run)</em></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;time.year&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="s2">&quot;time&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="interpolation">
<h3>4) Interpolation<a class="headerlink" href="#interpolation" title="Permalink to this headline">¶</a></h3>
<p>Interpolation is a common solution dealing with missing remote sensing data, either caused by coarse temporal resolution of the satellite, high cloud cover or bad quality of the scenes. For example, sometimes a scene of a specfic date is not available in the dataset. With the implemented <code class="docutils literal notranslate"><span class="pre">interp()</span></code> it is possible to <strong>interpolate data</strong> for predefined time steps. The function takes the next usable scene before and after the specified date and interpolates their values (default interpolation method is “linear”) to build a new <code class="docutils literal notranslate"><span class="pre">xarray.Dataset</span></code>.</p>
<p>In this example, the <code class="docutils literal notranslate"><span class="pre">ds</span></code> dataset has missing scenes on the “2020-12-08”. The <code class="docutils literal notranslate"><span class="pre">interp()</span></code> function builds a “new” scene based on an linear interpolation from the two measurments before and after the new time step.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">time</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_interp</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">interp</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;2020-12-08&quot;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ds_interp</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">merge()</span></code> function allows to <strong>merge/join</strong> <code class="docutils literal notranslate"><span class="pre">xarray.Datasets</span></code> or variables. By default the <code class="docutils literal notranslate"><span class="pre">merge()</span></code> function uses an “inner” join as merging operation.
In our example the interpolated <code class="docutils literal notranslate"><span class="pre">xarray.Dataset</span></code> created above is merged to the <code class="docutils literal notranslate"><span class="pre">ds</span></code> dataset by using the default <code class="docutils literal notranslate"><span class="pre">merge()</span></code> function.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">ds_interp</span><span class="p">)</span><span class="o">.</span><span class="n">time</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">xarray</span></code> package contains a variety of other useful functions in addition to those shown here. There is a function for almost every operation needed in data analysis. For more information about the <code class="docutils literal notranslate"><span class="pre">xarray</span></code> package visit the <a class="reference external" href="http://xarray.pydata.org/en/stable/">documentation website</a> or work through the <span class="xref myst">notebook</span> in the “intro_to_python” folder.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">xarray.Datasets</span></code> in the eo2cube datacube environment are a useful and effective structure for handeling remote sensing raster data. In this notebook you learned the basic structure and application methods of <code class="docutils literal notranslate"><span class="pre">xarray.Datasets</span></code>and <code class="docutils literal notranslate"><span class="pre">xarray.DataArrays</span></code>. However, it is very useful to not only work with the “raw” datasets and values. Sometimes it is necessary to get a visual overview of the data. The next <span class="xref myst">notebook 06</span> will cover how to plot <code class="docutils literal notranslate"><span class="pre">xarray</span></code> raster data nicely and efficient. This is a very useful application, as it is often more convenient to visualize the raster data.</p>
</div>
</div>
<div class="section" id="recommended-next-steps">
<h2>Recommended next steps<a class="headerlink" href="#recommended-next-steps" title="Permalink to this headline">¶</a></h2>
<p>To continue working through the notebooks in this beginner’s guide, the following notebooks are designed to be worked through in the following order:</p>
<ol class="simple">
<li><p><a class="reference external" href="https://github.com/eo2cube/eo2cube_notebooks/blob/main/get_started/intro_to_eo2cube/01_jupyter_introduction.ipynb">Jupyter Notebooks</a></p></li>
<li><p><a class="reference external" href="https://github.com/eo2cube/eo2cube_notebooks/blob/main/get_started/intro_to_eo2cube/02_eo2cube_introduction.ipynb">eo2cube</a></p></li>
<li><p><a class="reference external" href="https://github.com/eo2cube/eo2cube_notebooks/blob/main/get_started/intro_to_eo2cube/03_data_lookup_and_loading.ipynb">Loading Data</a></p></li>
<li><p><a class="reference external" href="https://github.com/eo2cube/eo2cube_notebooks/blob/main/get_started/intro_to_eo2cube/04_xarrayI_data_structure.ipynb">Xarray I: Data Structure</a></p></li>
<li><p><em><strong>Xarray II: Index and Statistics (this notebook)</strong></em></p></li>
<li><p><a class="reference external" href="https://github.com/eo2cube/eo2cube_notebooks/blob/main/get_started/intro_to_eo2cube/06_plotting_basics.ipynb">Plotting data</a></p></li>
<li><p><a class="reference external" href="https://github.com/eo2cube/eo2cube_notebooks/blob/main/get_started/intro_to_eo2cube/07_basic_analysis.ipynb">Spatial analysis</a></p></li>
<li><p><a class="reference external" href="https://github.com/eo2cube/eo2cube_notebooks/blob/main/get_started/intro_to_eo2cube/08_parallel_processing_with_dask.ipynb">Parallel processing with Dask</a></p></li>
</ol>
<p>The additional notebooks are designed for users to build up both basic and advanced skills which are not covered by the beginner’s guide. Self-motivated users can go through them according to their own needs. They act as complements for the guide:
<br></p>
<ol class="simple">
<li><p><a class="reference external" href="https://github.com/eo2cube/eo2cube_notebooks/blob/main/get_started/intro_to_eo2cube/I_file_management.ipynb">Python’s file management tools</a></p></li>
<li><p><a class="reference external" href="https://github.com/eo2cube/eo2cube_notebooks/blob/main/get_started/intro_to_eo2cube/II_numpy_image_processing.ipynb">Image Processing basics using NumPy and Matplotlib</a></p></li>
<li><p><a class="reference external" href="https://github.com/eo2cube/eo2cube_notebooks/blob/main/get_started/intro_to_eo2cube/III_process_vector_data.ipynb">Vector Processing</a></p></li>
<li><p><a class="reference external" href="https://github.com/eo2cube/eo2cube_notebooks/blob/main/get_started/intro_to_eo2cube/IV_advanced_plotting.ipynb">Advanced Plotting</a></p></li>
</ol>
</div>
<hr class="docutils" />
<div class="section" id="additional-information">
<h2>Additional information<a class="headerlink" href="#additional-information" title="Permalink to this headline">¶</a></h2>
<p><font size="2">This notebook for the usage in the Open Data Cube entities of the <a class="reference external" href="http://remote-sensing.org/">Department of Remote Sensing</a>, <a class="reference external" href="https://www.uni-wuerzburg.de/startseite/">University of Wuerzburg</a>, is adapted from <a class="reference external" href="https://github.com/GeoscienceAustralia/dea-notebooks">Geoscience Australia</a>, published using the Apache License, Version 2.0. Thanks! </font></p>
<p><strong>License:</strong> The code in this notebook is licensed under the <a class="reference external" href="https://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.
Digital Earth Australia data is licensed under the <a class="reference external" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons by Attribution 4.0</a> license.</p>
<p><strong>Contact:</strong> If you would like to report an issue with this notebook, you can file one on <a class="reference external" href="https://github.com">Github</a>.</p>
<p><strong>Last modified:</strong> February 2021</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./notebooks/beginners_guide"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="02_xarrayI_data_structure.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Xarray-I: Data Structure</p>
        </div>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By eo2cube community<br/>
    
        &copy; Copyright 2021.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>